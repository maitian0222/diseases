var TINGYUN=function(t,e,n){function r(t){var e=!!t&&"length"in t&&t.length,n=typeof t;return"function"!==n&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function i(t,e){var n,i=0;if(t)if(r(t))for(n=t.length;n>i&&!1!==e.call(t[i],t[i],i);i++);else for(i in t)if(!1===e.call(t[i],t[i],i))break;return t}function o(t){return function(e){return"Array"===t&&Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object "+t+"]"}}function a(t){switch(typeof t){case"object":if(!t)return null;if(t instanceof Array)return i(t,function(e,n){t[n]=a(e)}),"["+t.join(",")+"]";if(t instanceof Date)return t.getTime().toString();var e="";return i(t,function(t,n){Ce(t)||(e+=a(n)+":"+a(t)+",")}),e&&(e=e.substr(0,e.length-1)),"{"+e+"}";case"string":return Oe+t.replace(Le,"\\$1").replace(De,"\\n")+Oe;case"number":return isNaN(t)?null:t;case"boolean":return t;case"function":return a(t.toString());case"undefined":default:return'"undefined"'}}function u(t){return t&&qe(t)?ke(t):t}function s(t,e,n,r){var i=function(){return Me(t,e,i),n.apply(this,arguments)};return je(t,e,i,r)}function c(t,e){return Function.prototype.apply.apply(t,e)}function f(t,e){return function(){t.apply(e,arguments)}}function l(t){return He?He(t):t}function d(t){return arguments.length<2||!t?t:(i(Pe.call(arguments,1),function(e){i(e,function(e,n){t[n]=e})}),t)}function h(t,e){for(var n=-1,r=0,i=null==t?0:t.length,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function v(t,e){return t?e?t.replace(/\{(\w+.?\w+)\}/g,function(t,n){return e[n]||""}).replace(/\{(\d+)\}/g,function(t,n){return e[n]||""}):t:""}function p(t){return setTimeout(t,0)}function m(){}function g(){return+new Date}function y(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function S(t){return t?qe(t)?t.length:e.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:e.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function _(t){return Ue!==ze&&/^https/i.test(t&&t.protocol||Ue)?"https:":ze}function w(t,e,n,r){var o=null;return t&&e&&(o=_(r)+"//"+t+e,n&&(o+="?",i(n,function(t,e){var n=[l(e),"=",l(t),"&"];o+=n.join("")}),o+="__r="+g())),o}function E(){this.events={}}function b(t){return!(t in $e)||$e[t]}function x(t){var e=Ge.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?e[3]:null}function T(t,e,n){var r=t+"="+e;if(n){var i=new Date;i.setTime(i.getTime()+1e3*n),r+=";expires="+i.toGMTString()}Ge.cookie=r}function k(t,e,n){var r=Ge.createElement(t);try{for(var i in e)r[i]=e[i]}catch(o){var a="<"+t;for(var i in e)a+=" "+i+'="'+e[i]+'"';a+=">",n||(a+="</"+t+">"),r=Ge.createElement(a)}return r}function I(t,e,n,r){Ce(n)&&(r=n);var i=k("div",{style:Sn}),o=k("iframe",{name:"ty_form",width:0,height:0,style:Sn}),a=k("form",{style:Sn,action:t,enctype:"application/x-www-form-urlencoded",method:"post",target:"ty_form"}),u=k("input",{name:"data",type:"hidden"},!0);u.value=Ie(e),a.appendChild(u),i.appendChild(o),i.appendChild(a),Ge.body.appendChild(i),a.submit(),o.onreadystatechange=function(){o.readyState!==ln&&4!==o.readyState||(r(null,o.innerHTML),Ge.body.removeChild(i))}}function q(t,e,n){if(t&&n&&Ce(n)){var r=t[e];if(!r||!r._wrapped){var i=n(r);return i&&(i._wrapped=!0),t[e]=i,i}}}function R(t){En&&t()}function C(t){return function(){En&&t.apply(this,arguments)}}function N(){En=!1}function A(){kn.on(an,y(function(){t();var e=g();R(function(){bn.load=e}),Cn.loadEventEnd=e})),i([an,un,sn,cn],function(t){je(e,t,function(e){R(function(){(bn.e[t]||(bn.e[t]=[])).push(g())}),kn.emit(t,e)})});var t=y(function(){var t=g();R(function(){bn.end=t}),Cn.domContentLoadedEventStart=t,Ge.querySelectorAll&&(Tn.resources=Tn.resources||[],i(Ge.querySelectorAll("head>link,head>script"),function(t){var e;"LINK"==t.tagName?e=t.href:"SCRIPT"!=t.tagName||t.defer||t.async||(e=t.src),e&&Tn.resources.push(e)}))});je(Ge,"DOMContentLoaded",t),je(Ge,fn,function(){Ge.readyState===ln&&t()});var n=y(function(){Cn.touch=g()});i(["scroll","click","keypress"],function(t){s(Ge,t,n)}),q(e,"requestAnimationFrame",function(t){return function(){if(!Cn.firstPaint){var n=g();R(function(){bn.an.count++,bn.an.t=n}),Cn.firstPaint=n,e.requestAnimationFrame=t}return t.apply(this,arguments)}})}function O(t){D(t,In)}function L(t){D(t,qn)}function D(t,e){var n="ok";return t?void e.push(t):n=e.length?e.join("\n"):n}function B(){var t=this;t.xhrs={},t.errs=[],E.call(t)}function j(t,e){this.flags=0,Ce(t.create)&&(this.create=t.create,this.flags|=jn),Ce(t.before)&&(this.before=t.before,this.flags|=Mn),Ce(t.after)&&(this.after=t.after,this.flags|=Hn),Ce(t.error)&&(this.error=t.error,this.flags|=Pn),this.data=e}function M(t,e){if(!Un){if(!Ne(t)||!t)throw new TypeError("callbacks arguments must be an object");return Un=new j(t,e)}}function H(t){var e=Un.data;if(0!=(Un.flags&jn)){var n=Un.create(Un.data);void 0!==n&&(e=n)}return function(){0!=(Un.flags&Mn)&&Un.before(this,e);try{var n=t.apply(this,arguments)}catch(r){throw 0!=(Un.flags&Pn)&&Un.error(e,r),r}return 0!=(Un.flags&Hn)&&Un.after(this,e),n}}function P(t){return!Un||Un.flags<=0?t:H(t)}function F(){function t(t){return function(e){var n=Pe.call(arguments,0);Ce(e)&&(n[0]=P(e));var r=this;try{return t.apply(r,n)}catch(i){}return c(t,[r,n])}}q(e,"setTimeout",t),q(e,"setInterval",t)}function U(){this.id=null,this.active=null,this._set=[]}function z(){F();var t=new U;return t.id=M({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e,n){if(e){try{n.moduleId=e.moduleId}catch(r){}t.exit(e)}}}),t}function X(t){Bn&&console.warn(t||"Event key required!")}function Y(t){t=t||{},this.key=t.key;var e=t.timeout||6e5;this.i=e?setTimeout(f(this.fail,this),e):null,this.status=1,this.remain=0,this.xhrs=[],this.s=g(),this.e=null,this.called=this.sent=!1}function G(){if(Object.defineProperty){var t=e[pn];Object.defineProperty(e,pn,{get:function(){return Vn++>0&&e.console&&console.warn("window.%s is deprecated, use window.%s instead.",pn,mn),t}})}}function J(t){try{return u(t)}catch(e){O(e&&e.message)}return null}function K(){return Cn[rr]||Cn._end}function $(){return Cn.loadEventEnd||Cn._end}function V(t){function r(e){return t[e]>0?t[e]-a:0}var o={},a=n;if(t){R(function(){var e=bn.t={};i(t,function(t,n){Ce(t)||(e[n]=t)})}),a=t.navigationStart,o={f:r(Zn),qs:r(tr),rs:r(er),re:r(nr),os:r(rr),oe:r(ir),oi:r(or),oc:r(ar),ls:r(ur),le:r(sr),tus:r(cr),tue:r(fr)};var u=r(lr),s=r(dr),c=r(hr),f=r(vr),l=r(pr),d=r(mr);if(d-l>0&&(o.cs=l,o.ce=d),s-u>0&&(o.ds=u,o.de=s),(f-c>0||f>0)&&(o.es=c,o.ee=f),0==o.le){var h=$();o.ue=h-a}Cn._le=o.ue||o.le;var v,p;if(t.msFirstPaint)v=t.msFirstPaint,R(function(){bn.fp="m_"+v});else if((p=e.chrome)&&p.loadTimes){var m=p.loadTimes();m&&m.firstPaintTime&&(v=1e3*m.firstPaintTime),R(function(){bn.fp="c_"+m.firstPaintTime})}else Cn.firstPaint&&(v=Cn.firstPaint,R(function(){bn.fp=v}));v&&(o.fp=Math.round(v-a),Cn.fp=o.fp),t[gr]&&(o.sl=r(gr))}else o={t:a,os:K()-a,ls:$()-a};return o.je=Cn.errs&&Cn.errs.length||0,Cn.ct&&(o.ct=Cn.ct-a),Cn.touch&&(o.fi=Cn.touch-a),o}function Q(t,e){var r={tr:!1,tt:l(Ge.title),charset:Ge.characterSet};xn.resources&&d(r,xn.resources),R(function(){r.debug=bn}),N();var o=Cn.errs;i(o,function(t,r){var i=t.toObject();i.o=i.o-e&&e.navigationStart||n,o[r]=i}),r.err=o;var a="getEntriesByType";return t[a]?(r.tr=!0,r.res=[],i(t[a]("resource"),function(t){function e(e){var n=t[e];return n>0?n:0}var n=t.initiatorType,i=t.name,o={o:e("startTime"),rt:n,n:i,f:e(Zn),ds:e(lr),de:e(dr),cs:e(pr),ce:e(mr),sl:e(gr),qs:e(tr),rs:e(er),re:e(nr),ts:t.transferSize||0,es:t.encodedBodySize||0};if("xmlhttprequest"===n){var a=W(i);a&&(o.aid=a.id,o.atd=a.trId,o.an=a.action,o.aq=a.time&&a.time.qu,o.as=a.time&&a.time.duration)}r.res.push(o)})):L(v(On,[a])),r}function W(t){var e;return i(Cn.xhrs,function(n,r){return r&&r.indexOf(t)>-1?(e=n,!1):void 0}),e}function Z(t){var e={};return t&&(e.id=t.id,e.a=t.a,e.q=t.q,e.tid=t.tid,e.n=t.n),e}function te(t){var e=0,n=t.timing;return n?t.getEntriesByName&&(e=n.domLoading,i(Tn.resources,function(r){var i=t.getEntriesByName(r);if(1==i.length){var o=i[0].responseEnd+n.navigationStart;o>e&&(e=o)}}),e-=n.navigationStart):L("fp=0"),R(function(){bn._fp=e}),Math.round(e)}function ee(t,n,r,o){var a=r||0,u=xn.firstScreenResources;if(u&&u.length&&t.getEntriesByName)return i(u,function(e){var n=t.getEntriesByName(e);if(n.length){var r=n[0].responseEnd;r>a&&(a=r)}}),o.fs_s=1,Math.round(a);if(!Ge.createElement("img").getBoundingClientRect)return R(function(){bn.fs=a}),a;if(t.getEntriesByName){var s=e.innerHeight,c=[];i(Ge.querySelectorAll("img"),function(t){!re(t)&&""!=t.src&&ne(t)<s&&c.push(t.src)});var f=(n.loadEventEnd||Cn.loadEventEnd)-n.navigationStart;i(c,function(e){var n=t.getEntriesByName(e);if(n.length){var r=n[0],i=r.responseEnd;r.fetchStart<=f&&i>a&&(a=i)}})}return Math.round(a)}function ne(t){var n;if("undefined"==typeof t.getBoundingClientRect)return void 0;n=t.getBoundingClientRect();var r=e.pageYOffset;return n.top+(0===r?0:r||Ge.scrollTop||0)-(Ge.clientTop||0)}function re(t){var n="none";if(e.getComputedStyle){var r=t.ownerDocument.defaultView;r&&r.opener||(r=e),n=r.getComputedStyle(t).display}else t.currentStyle&&(n=t.currentStyle.display);return n&&"none"==n}function ie(t){var e=n,r=0;return t&&(e=t.navigationStart||e,r=t[rr]||t.domInteractive||t.domLoading||r),(r=Cn[rr]||r||Cn._end)-e}function oe(t){if(t){var e=t.fetchStart;if(e)return e-t.navigationStart}return void 0}function ae(t){return function(e,n){var r=this;if(!r[yn]){var i=r[pn]={};i.method=e,i.url=n,i.id=xr++;var o=Xn.get("event");o&&(i.key=o.key,o.remain++)}try{return t.apply(r,arguments)}catch(a){}return c(t,[r,arguments])}}function ue(t){return function(e){var n=this;if(!n[yn]){var r=n[pn];r&&(r.start=g(),r.reqSize=S(e)),se(n),n.setRequestHeader&&$e.id&&r&&Ir(r.url)&&(r.r=g()%1e9,n.setRequestHeader("X-Tingyun-Id",$e.id+";r="+r.r))}try{return t.apply(n,arguments)}catch(i){}return c(t,[n,arguments])}}function se(t){function e(e){return P(function(){ce(t);var n;if(Ce(e)){var r=t[pn];if(r&&4==t.readyState)var i=g();n=e.apply(this,arguments),r&&4==t.readyState&&(r.cbTime=g()-i,t[pn]=null)}return n})}function n(e){t[pn]&&(t[pn].errorCode=e)}if(t[kr])q(t,kr,e);else try{je(t,fn,P(function(){ce(t)})),i(Tr,function(e,r){je(t,r,function(){n(e)})})}catch(r){return void p(function(){i(Tr,function(e,r){var i="on"+r;t[i]?q(t,i,function(t){return n(e),Ce(t)?t.apply(this,arguments):void 0}):t[i]=function(){n(e)}}),q(t,kr,e)})}p(function(){q(t,kr,e)})}function ce(t){var e=t[pn];if(e&&(e.end=g(),e.readyState=t.readyState,4==t.readyState)){e.status=t.status,e.resSize=fe(t);var n=Xn.get("event");p(function(){var r=!1;if(i(br,function(t){return t.id===e.id?(r=!0,!1):void 0}),!r){var o=le(e,t);n&&n.key==e.key&&(n.xhrs.push(o),0==--n.remain&&n._end()),Cn.xhrs&&(Er(e),Cn.xhrs[e.url]=o),br.push(o)}})}}function fe(t){var e=0;if(""==t.responseType||"text"==t.responseType)e=S(t.responseText);else if(t.response)e=S(t.response);else try{e=S(t.responseText)}catch(n){}return e}function le(t,e){if(t){var n=t.status,r={id:t.id,req:t.method+" "+t.url,start:t.start,du:n>0?t.end-t.start:0,cb:t.cbTime||0,status:n,err:t.errorCode?t.errorCode:0,rec:t.resSize,send:t.reqSize};if(t.r){var i=he(e,t);i&&(r.s_id=i.id,r.s_name=i.action,i.time&&(r.s_du=i.time.duration,r.s_qu=i.time.qu),r.t_id=i.trId)}return r}}function de(t,e){return t&&t.getResponseHeader?t.getResponseHeader(e):void 0}function he(t,e){var n=J(de(t,"X-Tingyun-Tx-Data"));return n&&n.r&&ve(n.r)===ve(e.r)?n:null}function ve(t){return t+""}function pe(){return setInterval(function(){if(br&&br.length){var t=[];i(br,function(e){t.push(e)}),Cn.emit("send","/xhr1",null,{xhr:t},function(){br=h(br,function(e){return t.indexOf(e)<0})}),Fe()&&!e.XDomainRequest&&(br=[])}},_r)}function me(){var t=Je&&Je.prototype;return t?(q(t,"open",ae),q(t,"send",ue)):Je&&(e.XMLHttpRequest=function(){var t=new Je;return q(t,"open",ae),q(t,"send",ue),t}),pe()}function ge(t){this.limit=t,this.reset()}function ye(t,e,n,r){return String(t)+String(e)+String(n)+String(r)}function Se(t,e,n,r,i,o,a){var u=this;u.id=t,u.time=g(),u.msg=e,u.lineno=r,u.colno=i,u.filename=n,u.count=1,u.stack=o&&o.stack||"",u.module=a,u.fix();var s=Nr[t];u.ep=s?0:1,Nr[t]=!0}function _e(){var t=function(t){var e=[];return i(t,function(t){e.push(t.toObject())}),e}(Cr.c);return t&&t.length?void Cn.emit("send","/err1",{fu:Rr||Rr++,os:parseInt((g()-(Tn.pfStart||n))/1e3)},{datas:t},f(Cr.reset,Cr)):null}function we(t,e,n,r,o){if(e||!We){var a=!1;if(i(Ke.domains,function(t){return(a=t.test(e))?!1:void 0}),!a){var u=o&&o.moduleId,s=ye(t,n,r,u),c=Cr.get(s);c?c.increase():(c=new Se(s,t,e,n,r,o,u),Cr.add(s,c),Cn.errs&&Cn.errs.push(c))}}}function Ee(){var t=e.onerror;e.onerror=function(e,n,r,i,o){return we(e,n,r,i,o),Ce(t)?t.apply(this,arguments):void 0},e.onerror._ty=!0}function be(){var t=e.onerror;t&&t._ty||Ee()}function xe(){var t=Fe();return t?Ee():je(e,on,function(t){var n,r,i,o,a;(t instanceof e.Event||e.ErrorEvent&&t instanceof e.ErrorEvent)&&(n=t.message||t.error&&(t.error.message||t.error.constructor.name)||"",r=t.lineno||0,i=t.colno||0,(o=t.filename||t.error&&t.error.filename||t.target&&t.target.baseURI||"")==Ge.URL&&(o="#"),a=t.error),we(n,o,r,i,a)}),kn.on([an,un,sn,cn],function(){_e()}).on(an,function(){t&&p(be)}),setInterval(_e,qr)}function Te(){var t=Array.prototype;t.indexOf||(t.indexOf=function(t,e){var n=this.length>>>0;if((e|=0)<0)e=Math.max(n-e,0);else if(e>=n)return-1;if(void 0===t){do if(e in this&&void 0===this[e])return e;while(++e!==n)}else do if(this[e]===t)return e;while(++e!==n);return-1})}var ke,Ie,qe=o("String"),Re=o("Array"),Ce=o("Function"),Ne=o("Object"),Ae=o("Undefined"),Oe='"',Le=/([\"\\])/g,De=/\n/g,Be=e.JSON;Be&&Be.parse&&Be.stringify?(ke=function(t){return JSON.parse(t)},Ie=function(t){return JSON.stringify(t)}):(ke=function(t){return new Function("return "+t)()},Ie=a);var je,Me;e.addEventListener?(je=function(t,e,n,r){return t.addEventListener(e,n,r)},Me=function(t,e,n){return t.removeEventListener(e,n)}):(je=function(t,e,n){return t.attachEvent("on"+e,n)},Me=function(t,e,n){return t.detachEvent("on"+e,n)});var He=e.encodeURIComponent,Pe=[].slice,Fe=new Function("return!+[1,]"),Ue=e.location.protocol,ze="http:",Xe=function(){function t(t){return 0>t?0/0:30>=t?0|Math.random()*(1<<t):53>=t?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<t-30))*(1<<30):0/0}function e(t,e){for(var n=t.toString(16),r=e-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n}return function(){return e(t(32),8)+"-"+e(t(16),4)+"-"+e(16384|t(12),4)+"-"+e(32768|t(14),4)+"-"+e(t(48),12)}}();E.prototype={on:function(t,e){var n=this;return qe(t)?(n.events[t]||(n.events[t]=[])).push(e):Re(t)&&i(t,function(t){n.on(t,e)}),n},off:function(t,e){var n=arguments.length,r=this;if(0===n)return r.events={},r;var i=r.events[t];if(!i)return r;if(1===n)return r.events[t]=null,r;for(var o=i.length;o--;)if(i[o]===e){i.splice(o,1);break}return r},emit:function(t){var e=[].slice.call(arguments,1),n=this.events[t];return n&&i(n,function(t){return t.apply(this,e)}),this},unshift:function(t,e){var n=this;return(n.events[t]||(n.events[t]=[])).unshift(e),n}};var Ye=e.Error,Ge=e.document,Je=e.XMLHttpRequest,Ke={};t(Ke);var $e=Ke.server||{};$e=d({fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3},$e);var Ve,Qe,We=b("ignore_err"),Ze=b("debug"),tn=e.location,en=e.navigator,nn=e.HTMLElement;({localStorage:function(){try{var t=Xe();return e.localStorage.setItem(t,t),e.localStorage.removeItem(t),!0}catch(n){return!1}}()}).localStorage?(Ve=function(t){return e.localStorage.getItem(t)},Qe=function(t,n){return e.localStorage.setItem(t,n),n}):(Ve=x,Qe=T);var rn,on="error",an="load",un="unload",sn="beforeunload",cn="pagehide",fn="readystatechange",ln="complete",dn="TY_DISTINCT_ID",hn="TY_SESSION_ID",vn=86400,pn="_ty_rum",mn="TINGYUN",gn=2,yn="__ign",Sn="display:none",_n="POST",wn=function(t,e){e=e||m;var n=new Image;je(n,fn,function(){"loaded"!=n.readyState&&4!=n.readyState||e(null)},!1),je(n,an,function(){e(null)},!1),je(n,on,function(){e(on)},!1),n.src=t};e.XDomainRequest?rn=function(t,e,n,r){Ce(n)&&(r=n);var i=new XDomainRequest;i.open(_n,t),i.onload=function(){r(null,i.responseText)},i.onerror=function(t){r(t)},i.send(Ie(e))}:Fe()?rn=I:en.sendBeacon?wn=rn=function(t,e,n,r){Ce(n)&&(r=n,n=null),en.sendBeacon(t,Ie(e))&&r&&r()}:rn=function(t,e,n,r){Ce(n)&&(r=n,n=null);var i=y(r),o=new Je;o[yn]=!0,o.overrideMimeType&&o.overrideMimeType("text/html"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&i(null,o.responseText)},o.onerror=i,e=Ie(e);try{o.open(_n,t,!0)}catch(a){return I(t,e,i)}for(var u in n)o.setRequestHeader(u,n[u]);o.send(e)};var En=Ze,bn={start:n,e:{},an:{count:0},visible:[]},xn={},Tn={};!function(){if(Ze){var t,e,n="visibilitychange";Ae(Ge.hidden)?Ae(Ge.msHidden)?Ae(Ge.webkitHidden)||(t="webkitHidden",e="webkit"+n):(t="msHidden",e="ms"+n):(t="hidden",e=n),Ae(Ge.addEventListener)||Ae(Ge[t])||je(Ge,e,C(function(){bn.visible.push([Ge[t],g()])}))}}();var kn=new E,In=[],qn=[],Rn=B.prototype;Rn.start=function(){if(!$e.key)return O("missing config, agent disabled!"),!1;var t=e[pn]||e[mn];return t&&t.server?(O("already loaded!"),!1):(A(),this)},d(Rn,E.prototype);var Cn=new B;Cn.on("send",function(t,e,n,r){var i=w($e.beacon,t,d({},Nn,e||{}));switch(r=r||m,t){case"/pf":n?rn(i,n,function(){Cn.xhrs=Cn.errs=null,r()}):wn(i,r);break;default:rn(i,n,r)}});var Nn={pvid:Xe(),ref:Ge.URL,referrer:Ge.referrer,key:$e.key,v:"1.7.3",av:"1.7.3",did:function(){var t=Ve(dn);return t||Qe(dn,Xe(),vn)}(),sid:function(){var t=x(hn);return t||(t=Xe(),T(hn,t)),t}()},An=nn?function(t){return t instanceof nn}:function(t){t&&"object"==typeof t&&1===t.nodeType&&qe(t.nodeName)},On="{0} not support",Ln="illegal argument",Dn={},Bn="undefined"!=typeof e.console,jn=1,Mn=2,Hn=4,Pn=8,Fn=j.prototype;Fn.create=Fn.before=Fn.after=Fn.error=null;var Un;U.prototype={createContext:function(){return Object.create?Object.create(this.active):z(this.active)},get:function(t){return this.active?this.active[t]:void 0},set:function(t,e){return this.active?this.active[t]=e:void 0},enter:function(t){if(!t)throw new Ye("context required!");this._set.push(this.active),this.active=t},exit:function(t){if(!t)throw new Ye("context required!");if(t!==this.active){var e=this._set.lastIndexOf(t);if(0>e)throw new Ye("context not currently entered!");this._set.splice(e,1)}else this.active=this._set.pop()},bind:function(t,e){e||(e=this.active?this.active:this.createContext());var n=this;return function(){n.enter(e);try{return t.apply(this,arguments)}catch(r){try{r.moduleId=e.moduleId}catch(i){}throw r}finally{n.exit(e)}}}};var zn=!1,Xn=(zn||(Xn=z(),zn=!0),Xn),Yn=X.prototype;Yn.fail=Yn.end=m;var Gn=Y.prototype;Gn.end=Gn.finish=Gn.fail=null,Gn.send=function(t){var e=this;e.sent=!0;var n=t.event&&t.event.xhrs||[];i(n,function(t){t.start=t.start-e.s});var r={key:e.key,duration:e.e-e.s,status:e.status,xhrs:n};Cn.emit("send","/spe",null,r,m)};var Jn={},Kn={host:"cshst",url:"csurl"},$n={version:"1.7.3",config:function(t,e){var n;if(Ne(t))n=t;else{if(!qe(t)||void 0===e)throw new Ye(Ln);(n={})[t]=e}return i(n,function(t,e){e in Kn?xn[Kn[e]]=t:xn[e]=t}),this},DIAGNOSE_HREF:gn,diagnose:function(t){function e(t,e,r){var i=r||"log",o=n[t]||(n[t]={});o[i]=o[i]||"",o[i]+=e}var n={},r=O();if(e("Status",r,"ok"!==r),e("Debug",L()),i(Dn,function(t,n){e("Timeline",n+": "+t.toString())}),!t&&Bn)console.log("[TingYun Agent Diagnosis]\n"),i(n,function(t,e){i(console[e],function(t,e){console[e](t)})});else{if(t!==gn)return Ie(n);tn.href=tn.href+"#"+Ie(n)}},createEvent:function(t){var e=(t=t||{}).key;if(!e)return new X;if(Jn[e])return new X("event "+e+" is executing");Jn[e]=!0;var n=Xn.createContext();Xn.enter(n);var r=new Y(t);return Xn.set("event",r),r._end=function(){var t=this;!t.sent&&0===t.remain&&t.called&&t.finish().send(n)},r.end=function(t){var e=this;e.called?Bn&&console.warn("Event "+this.key+"has ended or failed!"):(e.called=!0,Xn.exit(n),e.status=arguments.length?t:1,e._end())},r.finish=function(){var t=this;return t.e=g(),t.i&&clearTimeout(t.i),delete Jn[t.key],t},r.fail=function(){this.end(0)},r},logFirstScreen:function(t){if(t){var e=xn.firstScreenResources=xn.firstScreenResources||[];Re(t)||(t=[t]),i(t,function(t){if(qe(t))e.push(t);else if(An(t)){var n=t.src||t.href;n&&e.push(n)}})}},addExcludedDomain:function(t){Re(t)||(t=[t]),i(t,function(t){if(t){if(!(t instanceof RegExp))throw new Ye("parameter's type requires RegExp");(Ke.domains||(Ke.domains=[])).push(t)}})}};e[pn]=e[mn]=$n;var Vn=0,Qn={},Wn=e.screen;Wn&&(Qn.sh=Wn.height,Qn.sw=Wn.width);var Zn="fetchStart",tr="requestStart",er="responseStart",nr="responseEnd",rr="domContentLoadedEventStart",ir="domContentLoadedEventEnd",or="domInteractive",ar="domComplete",ur="loadEventStart",sr="loadEventEnd",cr="unloadEventStart",fr="unloadEventEnd",lr="domainLookupStart",dr="domainLookupEnd",hr="redirectStart",vr="redirectEnd",pr="connectStart",mr="connectEnd",gr="secureConnectionStart",yr=function(t){if(!t.agent){var n=e._ty_rum;if(n&&n.agent)t.agent=n.agent;else{var r=x("TINGYUN_DATA");if(r){try{t.agent=J(decodeURIComponent(r))}catch(i){O(i&&i.message)}T("TINGYUN_DATA","",-1e3)}}}return t.agent}(Ke),Sr=function(){var t=y(function(){function t(t){return t?"1":"0"}var r=e.performance,o=!!r;o||L(v(On,["pf"]));var a=Z(yr),u=r&&r.timing,s=d(V(u),a,xn),c=d({},Qn);Cn.fp?(c.fp=Cn.fp,o&&Cn.fp>Cn._le&&(L("fp>le"),c.fp=te(r),c.__fp=2)):o?(c.fp=te(r),c.__fp=1):c.fp=c.__fp=0,c.dr=ie(u),o?c.fs=ee(r,u,c.fp,c):c.__fs=0;var f,l="";if(o){var h=Math.max(s.ls,0);h||(h=$()-u.navigationStart||n),c.trace=h;var p=oe(u);i(["fp","fs","dr","trace"],function(e){l+=t((p?c[e]-p:c[e])>=$e[e+"_threshold"])}),delete c.trace,l.indexOf("1")>-1&&(f=Q(r,u))}c.trflag=l||"0000",Tn.pfStart=g(),delete s.firstScreenResources,Cn.emit("send","/pf",d(s,c),f,function(){L("pf sent!"),Cn.xhrs=Cn.errs=null})});return kn.on(an,function(){p(t)}).on([un,sn,cn],t)},_r=2e3,wr=function(){var t=[];return i($e.custom_urls,function(e){try{t.push(new RegExp(e))}catch(n){O(n&&n.message)}}),t}(),Er=wr.length?function(t){var e=t.url;!Cn.ct&&e&&i(wr,function(n){return e.match(n)?(Cn.ct=t.end+t.cbTime,!1):void 0})}:m,br=[],xr=0,Tr={error:990,abort:905,timeout:903},kr="on"+fn,Ir=function(){function t(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}var e=/(msie|trident)/i.test(en.userAgent),n=Ge.createElement("a"),r=t(tn.href);return function(e){var n=t(e);return n.protocol===r.protocol&&n.host===r.host}}(),qr=1e4,Rr=0;ge.prototype={add:function(t,e){this.len>this.limit||this.get(t)||(this.c[t]=e,this.len++)},get:function(t){return this.c[t]},reset:function(){this.c={},this.len=0}};var Cr=new ge(100),Nr={},Ar=/([a-z]+:\/{2,3}.*):(\d+):(\d+)/;return Se.prototype={increase:function(){this.count++},fix:function(){var t=this,e=t.stack;if(t.module&&e&&qe(e)&&t.filename){e=e.split(/\n/);var n=Ar.exec(e[0])||Ar.exec(e[1]);n&&n[1]!=t.filename&&(t.filename=n[1]||t.filename,t.lineno=n[2]||t.lineno,t.colno=n[3]||t.colno)}},toObject:function(){var t=this;return{o:t.time,e:t.msg,l:t.lineno,c:t.colno,r:t.filename,ec:t.count,s:t.stack,m:t.module,ep:t.ep}}},Te(),Cn.start()&&(Sr(),me(),xe()),Cn._end=g(),R(function(){bn._end=Cn._end}),G(),$n}(function(t){t.server={id:"FKddX0BlpCc",ignore_err:!0,beacon:"beacon.tingyun.com",beacon_err:"beacon-err.tingyun.com",key:"vRbS42TP3lI",trace_threshold:7e3,fp_threshold:2e3,fs_threshold:4e3,dr_threshold:4e3,custom_urls:[],sr:1}},window,+new Date);